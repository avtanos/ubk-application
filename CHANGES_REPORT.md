# Отчет об изменениях в форме заявки

## Выполненные доработки согласно техническим требованиям

### ✅ 1. Основная информация заявителя

**Изменения:**
- ✅ Разделил поле "ИИН/Паспорт" на отдельные поля:
  - Тип документа (documentType)
  - Серия документа (documentSeries)
  - Номер документа (documentNumber)
  - Дата выдачи (documentIssueDate)
  - Орган выдачи (documentIssuingAuthority)
- ✅ Добавлены поля:
  - Пол (gender) - справочник genderList
  - Гражданство (citizenship) - справочник citizenshipList
  - Национальность (nationality) - справочник nationalityList
  - Образование (educationLevel) - справочник educationLevelList
- ✅ Структурирован адрес:
  - Адрес регистрации: регион, район, населенный пункт, улица, дом, квартира
  - Адрес фактического проживания: аналогичная структура
- ✅ Множественные контакты с типами (мобильный, домашний, рабочий, email)
- ✅ Добавлены поля:
  - Тип заявителя (applicantType) - справочник applicantTypes
  - Орган соцзащиты (municipalAuthority) - справочник municipalAuthorities

### ✅ 2. Состав семьи

**Изменения:**
- ✅ Расширены поля для каждого члена семьи:
  - Дата рождения (birthDate)
  - Пол (gender) - справочник genderList
  - Гражданство (citizenship) - справочник citizenshipList
  - Тип документа (documentType) - справочник documentTypeList
  - Номер документа (documentNumber)
  - Отношение к заявителю (relationToApplicant) - справочник familyRelationTypes
  - Статус (status) - справочник childStatusList
  - Инвалидность (isDisabled)
- ✅ Дополнительные поля для детей:
  - Категория ребенка (childCategory) - справочник childCategoryList
  - Номер свидетельства о рождении (birthCertificateNumber)
  - Статус обучения (isStudying)

### ✅ 3. Доходы

**Изменения:**
- ✅ Убраны поля "криптовалюта" и "инвестиции" (не в ТУ)
- ✅ Добавлены поля:
  - Тип дохода (type) - справочник incomeTypeList
  - Периодичность (periodicity) - справочник incomePeriodicityList
  - Источник дохода (source)
  - Период получения (period)
- ✅ Автоматический расчет:
  - Общий доход семьи
  - Доход на душу населения
  - Сравнение с прожиточным минимумом
- ✅ Группировка доходов по категориям согласно законодательству

### ✅ 4. Подсобное хозяйство

**Изменения:**
- ✅ Автоматический расчет условных голов скота:
  - Корова/лошадь: 1.0 условная голова
  - Овца/коза: 0.1 условная голова
  - Свинья: 0.2 условная голова
  - Птица: 0.01 условная голова
- ✅ Проверка лимита: 4 условные головы на члена семьи
- ✅ Проверка года выпуска транспорта:
  - Предупреждение для автомобилей старше 20 лет
  - Классификация транспорта (легковой/грузовой/специальный)
- ✅ Структурированные поля для земельных участков по типам

### ✅ 5. Документы

**Изменения:**
- ✅ Добавлена справка из уголовно-исполнительной инспекции
- ✅ Валидация файлов:
  - Поддерживаемые форматы: PDF, JPG, PNG, DOC, DOCX
  - Максимальный размер: 10 МБ
- ✅ Классификация документов:
  - Обязательные для всех
  - Дополнительные (при необходимости)
- ✅ Справочник типов документов (documentUploadTypeList)

### ✅ 6. Расчет и завершение

**Изменения:**
- ✅ Отдельные согласия:
  - Согласие на обработку персональных данных
  - Подтверждение достоверности информации
  - Согласие на обработку данных детей
  - Ознакомление с правилами пособия
- ✅ Подпись специалиста:
  - ФИО специалиста
  - Дата приема заявления
- ✅ Обоснование расчета:
  - Детальный расчет доходов
  - Сравнение с прожиточным минимумом
  - Причины отказа (при наличии)

## Новые справочники

### Добавленные справочники:
1. **vehicleTypeList** - Типы транспортных средств
2. **incomePeriodicityList** - Периодичность доходов
3. **childStatusList** - Статусы детей
4. **documentUploadTypeList** - Типы документов для загрузки

## Технические улучшения

### Компоненты:
- ✅ **DirectorySelect** - Обычный выпадающий список
- ✅ **DirectoryMultiSelect** - Множественный выбор с чекбоксами
- ✅ **DirectorySearch** - Поиск с выпадающим списком

### Функциональность:
- ✅ Пошаговая форма с валидацией
- ✅ Автоматические расчеты
- ✅ Проверка лимитов и ограничений
- ✅ Предупреждения и уведомления
- ✅ Адаптивный дизайн

## Доступ к формам

### Старая форма:
- URL: `http://localhost:3000/citizen/new-application`
- Описание: Базовая форма с пошаговым заполнением

### Новая форма (базовая):
- URL: `http://localhost:3000/citizen/application-form`
- Описание: Форма с использованием справочников

### Улучшенная форма:
- URL: `http://localhost:3000/citizen/enhanced-application`
- Описание: Полностью соответствующая техническим требованиям форма

## Соответствие техническим требованиям

| Требование | Статус | Описание |
|------------|--------|----------|
| Разделение ИИН/Паспорт | ✅ | Реализовано |
| Структурированный адрес | ✅ | Реализовано |
| Расширенные данные семьи | ✅ | Реализовано |
| Переработанные доходы | ✅ | Реализовано |
| Автоматический расчет ЛПХ | ✅ | Реализовано |
| Расширенные документы | ✅ | Реализовано |
| Отдельные согласия | ✅ | Реализовано |
| Подпись специалиста | ✅ | Реализовано |

## Заключение

Все требования из таблицы технических требований успешно реализованы. Форма заявки теперь полностью соответствует структуре, предусмотренной ТУ/Excel-структурой, с автоматическими расчетами, валидацией и улучшенным пользовательским интерфейсом.
